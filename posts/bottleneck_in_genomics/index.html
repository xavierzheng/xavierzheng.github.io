<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Navigating bottlenecks and trade-offs in genomic data analysis | Biology and computer science</title><meta name=keywords content="genome,ngs,info,paper"><meta name=description content="本文探討目前基因體資料分析裏，可能存在的瓶頸與解決方法"><meta name=author content="Me"><link rel=canonical href=https://canonical.url/to/page><meta name=google-site-verification content="ugct-6zQUc0xza7c6yCnC5MnQPkdHoE0oRX7FArE5uk"><link crossorigin=anonymous href=/assets/css/stylesheet.bccfefac377bc340f06c260aed1bddf49a4354816d7c570d6aac75a997986c95.css integrity="sha256-vM/vrDd7w0DwbCYK7Rvd9JpDVIFtfFcNaqx1qZeYbJU=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://xavierzheng.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://xavierzheng.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://xavierzheng.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://xavierzheng.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://xavierzheng.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Navigating bottlenecks and trade-offs in genomic data analysis"><meta property="og:description" content="本文探討目前基因體資料分析裏，可能存在的瓶頸與解決方法"><meta property="og:type" content="article"><meta property="og:url" content="https://xavierzheng.github.io/posts/bottleneck_in_genomics/"><meta property="og:image" content="https://xavierzheng.github.io/%3Cimage%20path/url%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-31T20:52:30+08:00"><meta property="article:modified_time" content="2022-12-31T20:52:30+08:00"><meta property="og:site_name" content="Biology and computer science"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xavierzheng.github.io/%3Cimage%20path/url%3E"><meta name=twitter:title content="Navigating bottlenecks and trade-offs in genomic data analysis"><meta name=twitter:description content="本文探討目前基因體資料分析裏，可能存在的瓶頸與解決方法"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://xavierzheng.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Navigating bottlenecks and trade-offs in genomic data analysis","item":"https://xavierzheng.github.io/posts/bottleneck_in_genomics/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Navigating bottlenecks and trade-offs in genomic data analysis","name":"Navigating bottlenecks and trade-offs in genomic data analysis","description":"本文探討目前基因體資料分析裏，可能存在的瓶頸與解決方法","keywords":["genome","ngs","info","paper"],"articleBody":"念書筆記 Ref: Navigating bottlenecks and trade-offs in genomic data analysis ref: Navigating bottlenecks and trade-offs in genomic data analysis | Nature Reviews Genetics\nhttps://doi.org/10.1038/s41576-022-00551-z\nTechnical trade-off Compute 無論是mapping或是variant calling都是超級花時間與運算力的工作，甚至在前面的read sorting, quality control, 處理CIGAR, 計算獲得quality score profile都是花算力，而且不一定是線性增長，有些甚至是log linear長大！！\nSpace 儲存與運算空間都要錢。以長時間儲存來說，就算用Amazon Glacier Deep Archive一樣很貴，所以目前如何長期保存genomic data依舊是個熱門研究領域 (ref [32](DNA stability: a central design consideration for DNA data storage systems | Nature Communications))。而短時間儲存更貴，要夠快夠穩定的效能，也需要有效率的壓縮方式 (bam, cram…)，甚至，因為需要把資料讀進RAM裏才能運算，所以目前更需要high RAM機器，那又更貴！！\nCommunication 在不同的儲存裝置之間的資料傳輸是更嚴重的瓶頸，當然在雲端上傳輸也是問題，因為每一個 bytes的傳輸都是錢！所以要傳輸raw read? Bam? Or vcf? 這都是考量。更甚者在single cell analysis裡面這更是大問題，因為資料量更大。\nUser-facing bottleneck Time 使用者需要花費多少時間去運算？即使現在有FPGA, GPU, or TPU加速，時間仍是問題。尤其是現在的computer cluster通常是由high RAM, more CPU, 有GPU等等異質性的運算結點組成，而整個genomic analysis pipeline又有不同步驟，有些要多RAM，有些要多核，如何分配這些步驟到適合的節點運算，以及資料如何安全的在這些節點裡傳輸，就成了大問題。或是每個人都在排隊搶大機器但排上的人根本用不了那麼多算力！\n解決方法百百種，像跑GATK如果在google cloud上跑，可能一筆30x全基因體定序就要數十小時，但用Illumina Dragen只要不到一小時。因此該如何運用平行運算等等的方法，就是使用者們的智慧了。\nMoney 上面說的那些平行運算或是能加速的方法通通要錢！！像是如果機器的RAM不夠，除了插好插滿插爆之外，就只能用硬碟做swap然後慢到天荒地老了。\nAccuracy 生物資訊演算法開發者永遠在速度與正確性之間權衡取捨，就像是BLAST這麼知名的演算法，他其實也是local alignment Smith-Waterman dynamic programming的變體，但正確性與古老的Smith-Waterman相比已經降低了。但相較於正確性問題，目前速度問題更是龐大。無論如何，使用者願意多花超過兩倍的錢去買算力以提升正確性嗎？要等更久時間？所以在合理範圍內降低正確性提高速度是必須的，但這需要好的benchmark才知道如何權衡。\nComplexity 許多常見的運算邏輯，是用low level language C or C++寫成的一個個演算法，再由各實驗室自己用high level language如python當膠水，把一個個程式的input與output串聯起來，雖然這些膠水程式通常很簡單，但因為只要任何一個步驟的input output改了，這些膠水程式就需要改，所以這部分需要花費極大人力時間成本去維護。\nModern computational methodologies Data compression Lossless compression 像是bgzip, bam等等都是目前常用的資料壓縮方法，同時也能執行random access，讓我們不用解開整個壓縮檔，就能找到特定區域的資料\nLossy compression 但就像影音資料處理的jpeg, mp3等格式，由於人眼與耳朵無法接收那麼高頻率的資料，所以丟掉一些資料是可容忍的，而且也是必須的，目前這也是標準資料處理的辦法。而在genomic data裡面，我們勢必面對丟棄部分資料的抉擇。但其實也沒那麼困難，因為生物學家愛用的exon seq，本質上就是丟棄了所有non coding region的實驗設計，所以很多時候實驗設計上的丟棄資料，遠比後續分析時的lossy compression還多。\nData sketching 在使用lossy compression時，重點是找到不需要的資料並把它丟掉，而且要確保下游的分析方法真的不會用到這些資訊。但data sketch可以說是直接萃取生物學上的重要特徵，舉例來說，像是bloom filter, Mash這些根植於hash function的方法都屬於data sketch。甚至根植於kmer 的分析方法，像是minimizer-like approach, mininap2, Kraken2, mashmap都是根植於萃取kmer直接比較，當然基於data sketching的方法正確性比較差，但速度絕對是超群，所以也是解決辦法之一。\nHardware acceleration 靠GPU, FPGA還是有用的，但它們只有在特定功能裡幫忙加速，目前要根植於GPU寫的生物資訊工具仍然不多，更別說是透過FPGA。\nCloud parallelization 平行運算當然是解決困境的方法之一，但評估機器成本太困難了，雲端租借也是簡單的解決辦法之一。目前大量的biobank資料都上雲了，無論是從Amazon，Google cloud或 Microsoft Azure都有這類服務。\nDomain specific library and languages 生物資訊類的工具不像deep learning之類的有TensorFlow 或PyTorch簡單好用的工具，所以發展一直快不起來。雖然C++, Rush, Julia夠快也容易做平行運算，但在生物資訊領域一直不是主流。\n另一種做法是類似Snakemake這種workflow，或是GUI的Galaxy都是開發的重點，這些都屬於domain specific language。也許生物資訊能靠這類型domain specific language而進展更快。\n未來期望 未來single cell dataset會是更大的問題，更肥，單一樣品，該怎麼好好處理它會是大問題。\nTake home messages 本文簡述了genomics data的生物資訊類研究，所面對的困境與可能解決的方法。對於這領域完全陌生的人，可以當作好的入門參考\nKeywords bioinfomatics, genomics, ngs\n","wordCount":"178","inLanguage":"en","image":"https://xavierzheng.github.io/%3Cimage%20path/url%3E","datePublished":"2022-12-31T20:52:30+08:00","dateModified":"2022-12-31T20:52:30+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://xavierzheng.github.io/posts/bottleneck_in_genomics/"},"publisher":{"@type":"Organization","name":"Biology and computer science","logo":{"@type":"ImageObject","url":"https://xavierzheng.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://xavierzheng.github.io accesskey=h title="Biology and computer science (Alt + H)"><img src=https://xavierzheng.github.io/apple-touch-icon.png alt aria-label=logo height=35>Biology and computer science</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://xavierzheng.github.io/search title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://xavierzheng.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://xavierzheng.github.io/archives/ title=archives><span>archives</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://xavierzheng.github.io>Home</a>&nbsp;»&nbsp;<a href=https://xavierzheng.github.io/posts/>Posts</a></div><h1 class=post-title>Navigating bottlenecks and trade-offs in genomic data analysis</h1><div class=post-description>本文探討目前基因體資料分析裏，可能存在的瓶頸與解決方法</div><div class=post-meta><span title='2022-12-31 20:52:30 +0800 CST'>December 31, 2022</span>&nbsp;·&nbsp;Me</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#ref-navigating-bottlenecks-and-trade-offs-in-genomic-data-analysis>Ref: Navigating bottlenecks and trade-offs in genomic data analysis</a></li><li><a href=#technical-trade-off>Technical trade-off</a><ul><li><a href=#compute>Compute</a></li><li><a href=#space>Space</a></li><li><a href=#communication>Communication</a></li></ul></li><li><a href=#user-facing-bottleneck>User-facing bottleneck</a><ul><li><a href=#time>Time</a></li><li><a href=#money>Money</a></li><li><a href=#accuracy>Accuracy</a></li><li><a href=#complexity>Complexity</a></li></ul></li><li><a href=#modern-computational-methodologies>Modern computational methodologies</a><ul><li><a href=#data-compression>Data compression</a></li><li><a href=#data-sketching>Data sketching</a></li><li><a href=#hardware-acceleration>Hardware acceleration</a></li><li><a href=#cloud-parallelization>Cloud parallelization</a></li><li><a href=#domain-specific-library-and-languages>Domain specific library and languages</a></li></ul></li><li><a href=#未來期望>未來期望</a></li><li><a href=#take-home-messages>Take home messages</a></li><li><a href=#keywords>Keywords</a></li></ul></nav></div></details></div><div class=post-content><h1 id=念書筆記>念書筆記<a hidden class=anchor aria-hidden=true href=#念書筆記>#</a></h1><h2 id=ref-navigating-bottlenecks-and-trade-offs-in-genomic-data-analysis>Ref: Navigating bottlenecks and trade-offs in genomic data analysis<a hidden class=anchor aria-hidden=true href=#ref-navigating-bottlenecks-and-trade-offs-in-genomic-data-analysis>#</a></h2><p>ref: <a href=https://www.nature.com/articles/s41576-022-00551-z>Navigating bottlenecks and trade-offs in genomic data analysis | Nature Reviews Genetics</a></p><p><a href=https://doi.org/10.1038/s41576-022-00551-z>https://doi.org/10.1038/s41576-022-00551-z</a></p><h2 id=technical-trade-off>Technical trade-off<a hidden class=anchor aria-hidden=true href=#technical-trade-off>#</a></h2><h3 id=compute>Compute<a hidden class=anchor aria-hidden=true href=#compute>#</a></h3><p>無論是mapping或是variant calling都是超級花時間與運算力的工作，甚至在前面的read sorting, quality control, 處理CIGAR, 計算獲得quality score profile都是花算力，而且不一定是線性增長，有些甚至是log linear長大！！</p><h3 id=space>Space<a hidden class=anchor aria-hidden=true href=#space>#</a></h3><p>儲存與運算空間都要錢。以長時間儲存來說，就算用Amazon Glacier Deep Archive一樣很貴，所以目前如何長期保存genomic data依舊是個熱門研究領域 (ref [32](<a href=https://www.nature.com/articles/s41467-021-21587-5>DNA stability: a central design consideration for DNA data storage systems | Nature Communications</a>))。而短時間儲存更貴，要夠快夠穩定的效能，也需要有效率的壓縮方式 (bam, cram&mldr;)，甚至，因為需要把資料讀進RAM裏才能運算，所以目前更需要high RAM機器，那又更貴！！</p><h3 id=communication>Communication<a hidden class=anchor aria-hidden=true href=#communication>#</a></h3><p>在不同的儲存裝置之間的資料傳輸是更嚴重的瓶頸，當然在雲端上傳輸也是問題，因為每一個 bytes的傳輸都是錢！所以要傳輸raw read? Bam? Or vcf? 這都是考量。更甚者在single cell analysis裡面這更是大問題，因為資料量更大。</p><h2 id=user-facing-bottleneck>User-facing bottleneck<a hidden class=anchor aria-hidden=true href=#user-facing-bottleneck>#</a></h2><h3 id=time>Time<a hidden class=anchor aria-hidden=true href=#time>#</a></h3><p>使用者需要花費多少時間去運算？即使現在有FPGA, GPU, or TPU加速，時間仍是問題。尤其是現在的computer cluster通常是由high RAM, more CPU, 有GPU等等異質性的運算結點組成，而整個genomic analysis pipeline又有不同步驟，有些要多RAM，有些要多核，如何分配這些步驟到適合的節點運算，以及資料如何安全的在這些節點裡傳輸，就成了大問題。或是每個人都在排隊搶大機器但排上的人根本用不了那麼多算力！</p><p>解決方法百百種，像跑GATK如果在google cloud上跑，可能一筆30x全基因體定序就要數十小時，但用Illumina Dragen只要不到一小時。因此該如何運用平行運算等等的方法，就是使用者們的智慧了。</p><h3 id=money>Money<a hidden class=anchor aria-hidden=true href=#money>#</a></h3><p>上面說的那些平行運算或是能加速的方法通通要錢！！像是如果機器的RAM不夠，除了插好插滿插爆之外，就只能用硬碟做swap然後慢到天荒地老了。</p><h3 id=accuracy>Accuracy<a hidden class=anchor aria-hidden=true href=#accuracy>#</a></h3><p>生物資訊演算法開發者永遠在速度與正確性之間權衡取捨，就像是BLAST這麼知名的演算法，他其實也是local alignment Smith-Waterman dynamic programming的變體，但正確性與古老的Smith-Waterman相比已經降低了。但相較於正確性問題，目前速度問題更是龐大。無論如何，使用者願意多花超過兩倍的錢去買算力以提升正確性嗎？要等更久時間？所以在合理範圍內降低正確性提高速度是必須的，但這需要好的benchmark才知道如何權衡。</p><h3 id=complexity>Complexity<a hidden class=anchor aria-hidden=true href=#complexity>#</a></h3><p>許多常見的運算邏輯，是用low level language C or C++寫成的一個個演算法，再由各實驗室自己用high level language如python當膠水，把一個個程式的input與output串聯起來，雖然這些膠水程式通常很簡單，但因為只要任何一個步驟的input output改了，這些膠水程式就需要改，所以這部分需要花費極大人力時間成本去維護。</p><h2 id=modern-computational-methodologies>Modern computational methodologies<a hidden class=anchor aria-hidden=true href=#modern-computational-methodologies>#</a></h2><h3 id=data-compression>Data compression<a hidden class=anchor aria-hidden=true href=#data-compression>#</a></h3><h4 id=lossless-compression>Lossless compression<a hidden class=anchor aria-hidden=true href=#lossless-compression>#</a></h4><p>像是bgzip, bam等等都是目前常用的資料壓縮方法，同時也能執行random access，讓我們不用解開整個壓縮檔，就能找到特定區域的資料</p><h4 id=lossy-compression>Lossy compression<a hidden class=anchor aria-hidden=true href=#lossy-compression>#</a></h4><p>但就像影音資料處理的jpeg, mp3等格式，由於人眼與耳朵無法接收那麼高頻率的資料，所以丟掉一些資料是可容忍的，而且也是必須的，目前這也是標準資料處理的辦法。而在genomic data裡面，我們勢必面對丟棄部分資料的抉擇。但其實也沒那麼困難，因為生物學家愛用的exon seq，本質上就是丟棄了所有non coding region的實驗設計，所以很多時候實驗設計上的丟棄資料，遠比後續分析時的lossy compression還多。</p><h3 id=data-sketching>Data sketching<a hidden class=anchor aria-hidden=true href=#data-sketching>#</a></h3><p>在使用lossy compression時，重點是找到不需要的資料並把它丟掉，而且要確保下游的分析方法真的不會用到這些資訊。但data sketch可以說是直接萃取生物學上的重要特徵，舉例來說，像是bloom filter, Mash這些根植於hash function的方法都屬於data sketch。甚至根植於kmer 的分析方法，像是minimizer-like approach, mininap2, Kraken2, mashmap都是根植於萃取kmer直接比較，當然基於data sketching的方法正確性比較差，但速度絕對是超群，所以也是解決辦法之一。</p><h3 id=hardware-acceleration>Hardware acceleration<a hidden class=anchor aria-hidden=true href=#hardware-acceleration>#</a></h3><p>靠GPU, FPGA還是有用的，但它們只有在特定功能裡幫忙加速，目前要根植於GPU寫的生物資訊工具仍然不多，更別說是透過FPGA。</p><h3 id=cloud-parallelization>Cloud parallelization<a hidden class=anchor aria-hidden=true href=#cloud-parallelization>#</a></h3><p>平行運算當然是解決困境的方法之一，但評估機器成本太困難了，雲端租借也是簡單的解決辦法之一。目前大量的biobank資料都上雲了，無論是從Amazon，Google cloud或 Microsoft Azure都有這類服務。</p><h3 id=domain-specific-library-and-languages>Domain specific library and languages<a hidden class=anchor aria-hidden=true href=#domain-specific-library-and-languages>#</a></h3><p>生物資訊類的工具不像deep learning之類的有TensorFlow 或PyTorch簡單好用的工具，所以發展一直快不起來。雖然C++, Rush, Julia夠快也容易做平行運算，但在生物資訊領域一直不是主流。</p><p>另一種做法是類似Snakemake這種workflow，或是GUI的Galaxy都是開發的重點，這些都屬於domain specific language。也許生物資訊能靠這類型domain specific language而進展更快。</p><h2 id=未來期望>未來期望<a hidden class=anchor aria-hidden=true href=#未來期望>#</a></h2><p>未來single cell dataset會是更大的問題，更肥，單一樣品，該怎麼好好處理它會是大問題。</p><h2 id=take-home-messages>Take home messages<a hidden class=anchor aria-hidden=true href=#take-home-messages>#</a></h2><p>本文簡述了genomics data的生物資訊類研究，所面對的困境與可能解決的方法。對於這領域完全陌生的人，可以當作好的入門參考</p><h2 id=keywords>Keywords<a hidden class=anchor aria-hidden=true href=#keywords>#</a></h2><p>bioinfomatics, genomics, ngs</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://xavierzheng.github.io/tags/genome/>genome</a></li><li><a href=https://xavierzheng.github.io/tags/ngs/>ngs</a></li><li><a href=https://xavierzheng.github.io/tags/info/>info</a></li><li><a href=https://xavierzheng.github.io/tags/paper/>paper</a></li></ul><nav class=paginav><a class=prev href=https://xavierzheng.github.io/posts/mutation_rate_evolving_trait/><span class=title>« Prev</span><br><span>The mutation rate as an evolving trait</span></a>
<a class=next href=https://xavierzheng.github.io/posts/maize-network/><span class=title>Next »</span><br><span>A multi-omics integrative network map of maize</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://xavierzheng.github.io>Biology and computer science</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body><div id=fastSearch><input id=searchInput tabindex=0><ul id=searchResults></ul></div><script src=/js/fuse.basic.min.js></script>
<script src=/js/fastsearch.js></script></html>